# --- Plugin path (XDG-aware) -------------------------------------------------
# default
set-environment -g TMUX_PLUGIN_MANAGER_PATH "$HOME/.local/share/tmux/plugins"
# prefer XDG if present
if-shell -b "test -n \"\$XDG_DATA_HOME\"" \
  "set-environment -g TMUX_PLUGIN_MANAGER_PATH \"\$XDG_DATA_HOME/tmux/plugins\""

# Ensure the directory exists
run-shell -b "mkdir -p \"\$TMUX_PLUGIN_MANAGER_PATH\""

# --- Plugins -----------------------------------------------------------------
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'jabirali/tmux-tilish'

set -g @tilish-bindings "on"
set -g @tilish-cycle "on"

# --- Bootstrap TPM if missing ------------------------------------------------
if-shell -b "[ ! -d \"\$TMUX_PLUGIN_MANAGER_PATH/tpm\" ]" \
  "run-shell 'git clone https://github.com/tmux-plugins/tpm \"\$TMUX_PLUGIN_MANAGER_PATH/tpm\" && tmux display-message \"[tpm] Installed to \$TMUX_PLUGIN_MANAGER_PATH/tpm\"'"

# --- Initialize TPM (keep at end) -------------------------------------------
run-shell -b "\$TMUX_PLUGIN_MANAGER_PATH/tpm/tpm"

