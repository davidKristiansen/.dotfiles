#!/usr/bin/env bash
set -euo pipefail

BIN="/opt/1Password/1password"
CR='[app_id="1Password"]'   # from your get_tree

# 1) If it's not running, start it, give it a moment, then mark as floating + scratchpad.
if ! pgrep -f "$BIN" >/dev/null 2>&1; then
  swaymsg 'exec --no-startup-id /opt/1Password/1password' >/dev/null
  sleep 3.5
fi

# 2) Toggle/show from scratchpad (acts as raise if hidden; toggles if already shown).
swaymsg "$CR scratchpad show" >/dev/null 2>&1

